{"ast":null,"code":"import React,{useEffect,useState}from'react';import profile from'../assets/female_doctor.webp';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=props=>{const userid=props.userID.userID;console.log('userid for backend from profile',userid);const[data,setData]=useState([]);const[editMode,setEditMode]=useState(false);const[editedData,setEditedData]=useState({});console.log(editedData);let apiBaseUrl='https://caresync-pro.onrender.com';const url=\"\".concat(apiBaseUrl,\"/auth/userdata?data=\").concat(encodeURIComponent(userid));useEffect(()=>{const fetchData=async()=>{try{const response=await fetch(url);if(!response.ok){throw new Error('Failed to fetch user data');}const data=await response.json();setData(data);setEditedData(data);// Initialize editedData with the fetched data\n}catch(error){console.log(error);}};fetchData();},[url]);const handleSaveClick=async()=>{try{const response=await axios.put(\"\".concat(apiBaseUrl,\"/auth/update-profile/\").concat(userid),editedData);setData(response.data);setEditMode(false);}catch(error){console.error('Error updating user profile:',error);}};const handleEditClick=()=>{setEditMode(true);};const handleCancelClick=()=>{// Reset editedData to match the current data\nsetEditedData(data);setEditMode(false);};const handleInputChange=e=>{// Update the editedData state as the user types into the input fields\nsetEditedData({...editedData,[e.target.name]:e.target.value});};return/*#__PURE__*/_jsx(\"div\",{className:\" d-flex justify-content-center align-items-center mx-auto  mt-5 \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"res-profile d-flex  justify-content-center align-items-center bg-secondary bg-opacity-75 flex-column gap-2 rounded\",style:{width:'60%',height:'70vh'},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:profile,alt:\"\",style:{width:'8rem',borderRadius:'50%'}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column\",style:{width:'95%'},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"firstName\",children:\"First Name\"}),editMode?/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"firstName\",className:\"rounded border border-black p-2 bg-transparent text-capitalize \",name:\"firstName\",value:editedData.firstName,onChange:handleInputChange}):/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"firstName\",className:\"rounded border border-black p-2 bg-transparent text-capitalize\",value:data.firstName,readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column \",style:{width:'95%'},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lastName\",children:\"Last Name\"}),editMode?/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"lastName\",className:\"rounded border border-black p-2 bg-transparent text-capitalize \",name:\"lastName\",value:editedData.lastName,onChange:handleInputChange}):/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"lastName\",className:\"rounded border border-black p-2 bg-transparent text-capitalize\",value:data.lastName,readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column \",style:{width:'95%'},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"email\",className:\"rounded border border-black p-2 bg-transparent \",value:data.email,readOnly:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"\",children:editMode?/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary \",style:{width:'20vw',height:'6vh'},onClick:handleSaveClick,children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger  \",style:{width:'20vw',height:'6vh'},onClick:handleCancelClick,children:\"Cancel\"})]}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary btn-block btn-lg p-2 \",style:{width:'20vw',height:'6vh'},type:\"button\",onClick:handleEditClick,children:\"Edit\"})})]})});};export default Profile;","map":{"version":3,"names":["React","useEffect","useState","profile","axios","jsx","_jsx","jsxs","_jsxs","Profile","props","userid","userID","console","log","data","setData","editMode","setEditMode","editedData","setEditedData","apiBaseUrl","url","concat","encodeURIComponent","fetchData","response","fetch","ok","Error","json","error","handleSaveClick","put","handleEditClick","handleCancelClick","handleInputChange","e","target","name","value","className","children","style","width","height","src","alt","borderRadius","htmlFor","type","id","firstName","onChange","readOnly","lastName","email","onClick"],"sources":["/Users/dharmaseervi/Desktop/CareSync-Pro/client-side/src/pages/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport profile from '../assets/female_doctor.webp';\nimport axios from 'axios';\n\nconst Profile = (props) => {\n    const userid = props.userID.userID;\n    console.log('userid for backend from profile', userid);\n\n    const [data, setData] = useState([]);\n    const [editMode, setEditMode] = useState(false);\n    const [editedData, setEditedData] = useState({});\n    console.log(editedData);\n \n    let apiBaseUrl = 'https://caresync-pro.onrender.com'\n    const url = `${apiBaseUrl}/auth/userdata?data=${encodeURIComponent(userid)}`;\n\n\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                const response = await fetch(url);\n                if (!response.ok) {\n                    throw new Error('Failed to fetch user data');\n                }\n                const data = await response.json();\n                setData(data);\n                setEditedData(data); // Initialize editedData with the fetched data\n            } catch (error) {\n                console.log(error);\n            }\n        };\n\n        fetchData();\n    }, [url]);\n\n    const handleSaveClick = async () => {\n        try {\n            const response = await axios.put(`${apiBaseUrl}/auth/update-profile/${userid}`, editedData);\n            setData(response.data);\n            setEditMode(false);\n        } catch (error) {\n            console.error('Error updating user profile:', error);\n        }\n    };\n\n    const handleEditClick = () => {\n        setEditMode(true);\n    };\n\n\n    const handleCancelClick = () => {\n        // Reset editedData to match the current data\n        setEditedData(data);\n        setEditMode(false);\n    };\n\n    const handleInputChange = (e) => {\n        // Update the editedData state as the user types into the input fields\n        setEditedData({\n            ...editedData,\n            [e.target.name]: e.target.value,\n        });\n    };\n\n    return (\n        <div className=' d-flex justify-content-center align-items-center mx-auto  mt-5 '>\n            <div className='res-profile d-flex  justify-content-center align-items-center bg-secondary bg-opacity-75 flex-column gap-2 rounded' style={{ width: '60%', height: '70vh' }}>\n                <div >\n                    <img src={profile} alt=\"\" style={{ width: '8rem', borderRadius: '50%' }} />\n                </div>\n\n                <div className=\"d-flex flex-column\" style={{ width: '95%' }}>\n                    <label htmlFor=\"firstName\">First Name</label>\n                    {editMode ? (\n                        <input\n                            type=\"text\"\n                            id=\"firstName\"\n                            className=\"rounded border border-black p-2 bg-transparent text-capitalize \"\n                            name=\"firstName\"\n                            value={editedData.firstName}\n                            onChange={handleInputChange}\n                        />\n                    ) : (\n                        <input\n                            type=\"text\"\n                            id=\"firstName\"\n                            className=\"rounded border border-black p-2 bg-transparent text-capitalize\"\n                            value={data.firstName}\n                            readOnly\n                        />\n                    )}\n                </div>\n                <div className=\"d-flex flex-column \" style={{ width: '95%' }}>\n                    <label htmlFor=\"lastName\">Last Name</label>\n                    {editMode ? (\n                        <input\n                            type=\"text\"\n                            id=\"lastName\"\n                            className=\"rounded border border-black p-2 bg-transparent text-capitalize \"\n                            name=\"lastName\"\n                            value={editedData.lastName}\n                            onChange={handleInputChange}\n                        />\n                    ) : (\n                        <input\n                            type=\"text\"\n                            id=\"lastName\"\n                            className=\"rounded border border-black p-2 bg-transparent text-capitalize\"\n                            value={data.lastName}\n                            readOnly\n                        />\n                    )}\n                </div>\n                <div className=\"d-flex flex-column \" style={{ width: '95%' }}>\n                    <label htmlFor=\"email\">Email</label>\n                    <input\n                        type=\"text\"\n                        id=\"email\"\n                        className=\"rounded border border-black p-2 bg-transparent \"\n                        value={data.email}\n                        readOnly\n                    />\n                </div>\n                <div className=''>\n                    {editMode ? (\n                        <div className='d-flex gap-2' >\n                            <button className='btn btn-primary ' style={{ width: '20vw', height: '6vh' }} onClick={handleSaveClick}>Save</button>\n                            <button className='btn btn-danger  ' style={{ width: '20vw', height: '6vh' }} onClick={handleCancelClick}>Cancel</button>\n                        </div>\n                    ) : (\n                        <button className='btn btn-secondary btn-block btn-lg p-2 ' style={{ width: '20vw', height: '6vh' }} type='button' onClick={handleEditClick}>Edit</button>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Profile;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,OAAO,KAAM,8BAA8B,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,OAAO,CAAIC,KAAK,EAAK,CACvB,KAAM,CAAAC,MAAM,CAAGD,KAAK,CAACE,MAAM,CAACA,MAAM,CAClCC,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAEH,MAAM,CAAC,CAEtD,KAAM,CAACI,IAAI,CAAEC,OAAO,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACe,QAAQ,CAAEC,WAAW,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAACiB,UAAU,CAAEC,aAAa,CAAC,CAAGlB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAChDW,OAAO,CAACC,GAAG,CAACK,UAAU,CAAC,CAEvB,GAAI,CAAAE,UAAU,CAAG,mCAAmC,CACpD,KAAM,CAAAC,GAAG,IAAAC,MAAA,CAAMF,UAAU,yBAAAE,MAAA,CAAuBC,kBAAkB,CAACb,MAAM,CAAC,CAAE,CAG5EV,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAwB,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC1B,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACL,GAAG,CAAC,CACjC,GAAI,CAACI,QAAQ,CAACE,EAAE,CAAE,CACd,KAAM,IAAI,CAAAC,KAAK,CAAC,2BAA2B,CAAC,CAChD,CACA,KAAM,CAAAd,IAAI,CAAG,KAAM,CAAAW,QAAQ,CAACI,IAAI,CAAC,CAAC,CAClCd,OAAO,CAACD,IAAI,CAAC,CACbK,aAAa,CAACL,IAAI,CAAC,CAAE;AACzB,CAAE,MAAOgB,KAAK,CAAE,CACZlB,OAAO,CAACC,GAAG,CAACiB,KAAK,CAAC,CACtB,CACJ,CAAC,CAEDN,SAAS,CAAC,CAAC,CACf,CAAC,CAAE,CAACH,GAAG,CAAC,CAAC,CAET,KAAM,CAAAU,eAAe,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACA,KAAM,CAAAN,QAAQ,CAAG,KAAM,CAAAtB,KAAK,CAAC6B,GAAG,IAAAV,MAAA,CAAIF,UAAU,0BAAAE,MAAA,CAAwBZ,MAAM,EAAIQ,UAAU,CAAC,CAC3FH,OAAO,CAACU,QAAQ,CAACX,IAAI,CAAC,CACtBG,WAAW,CAAC,KAAK,CAAC,CACtB,CAAE,MAAOa,KAAK,CAAE,CACZlB,OAAO,CAACkB,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACxD,CACJ,CAAC,CAED,KAAM,CAAAG,eAAe,CAAGA,CAAA,GAAM,CAC1BhB,WAAW,CAAC,IAAI,CAAC,CACrB,CAAC,CAGD,KAAM,CAAAiB,iBAAiB,CAAGA,CAAA,GAAM,CAC5B;AACAf,aAAa,CAACL,IAAI,CAAC,CACnBG,WAAW,CAAC,KAAK,CAAC,CACtB,CAAC,CAED,KAAM,CAAAkB,iBAAiB,CAAIC,CAAC,EAAK,CAC7B;AACAjB,aAAa,CAAC,CACV,GAAGD,UAAU,CACb,CAACkB,CAAC,CAACC,MAAM,CAACC,IAAI,EAAGF,CAAC,CAACC,MAAM,CAACE,KAC9B,CAAC,CAAC,CACN,CAAC,CAED,mBACIlC,IAAA,QAAKmC,SAAS,CAAC,kEAAkE,CAAAC,QAAA,cAC7ElC,KAAA,QAAKiC,SAAS,CAAC,oHAAoH,CAACE,KAAK,CAAE,CAAEC,KAAK,CAAE,KAAK,CAAEC,MAAM,CAAE,MAAO,CAAE,CAAAH,QAAA,eACxKpC,IAAA,QAAAoC,QAAA,cACIpC,IAAA,QAAKwC,GAAG,CAAE3C,OAAQ,CAAC4C,GAAG,CAAC,EAAE,CAACJ,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAM,CAAEI,YAAY,CAAE,KAAM,CAAE,CAAE,CAAC,CAC1E,CAAC,cAENxC,KAAA,QAAKiC,SAAS,CAAC,oBAAoB,CAACE,KAAK,CAAE,CAAEC,KAAK,CAAE,KAAM,CAAE,CAAAF,QAAA,eACxDpC,IAAA,UAAO2C,OAAO,CAAC,WAAW,CAAAP,QAAA,CAAC,YAAU,CAAO,CAAC,CAC5CzB,QAAQ,cACLX,IAAA,UACI4C,IAAI,CAAC,MAAM,CACXC,EAAE,CAAC,WAAW,CACdV,SAAS,CAAC,iEAAiE,CAC3EF,IAAI,CAAC,WAAW,CAChBC,KAAK,CAAErB,UAAU,CAACiC,SAAU,CAC5BC,QAAQ,CAAEjB,iBAAkB,CAC/B,CAAC,cAEF9B,IAAA,UACI4C,IAAI,CAAC,MAAM,CACXC,EAAE,CAAC,WAAW,CACdV,SAAS,CAAC,gEAAgE,CAC1ED,KAAK,CAAEzB,IAAI,CAACqC,SAAU,CACtBE,QAAQ,MACX,CACJ,EACA,CAAC,cACN9C,KAAA,QAAKiC,SAAS,CAAC,qBAAqB,CAACE,KAAK,CAAE,CAAEC,KAAK,CAAE,KAAM,CAAE,CAAAF,QAAA,eACzDpC,IAAA,UAAO2C,OAAO,CAAC,UAAU,CAAAP,QAAA,CAAC,WAAS,CAAO,CAAC,CAC1CzB,QAAQ,cACLX,IAAA,UACI4C,IAAI,CAAC,MAAM,CACXC,EAAE,CAAC,UAAU,CACbV,SAAS,CAAC,iEAAiE,CAC3EF,IAAI,CAAC,UAAU,CACfC,KAAK,CAAErB,UAAU,CAACoC,QAAS,CAC3BF,QAAQ,CAAEjB,iBAAkB,CAC/B,CAAC,cAEF9B,IAAA,UACI4C,IAAI,CAAC,MAAM,CACXC,EAAE,CAAC,UAAU,CACbV,SAAS,CAAC,gEAAgE,CAC1ED,KAAK,CAAEzB,IAAI,CAACwC,QAAS,CACrBD,QAAQ,MACX,CACJ,EACA,CAAC,cACN9C,KAAA,QAAKiC,SAAS,CAAC,qBAAqB,CAACE,KAAK,CAAE,CAAEC,KAAK,CAAE,KAAM,CAAE,CAAAF,QAAA,eACzDpC,IAAA,UAAO2C,OAAO,CAAC,OAAO,CAAAP,QAAA,CAAC,OAAK,CAAO,CAAC,cACpCpC,IAAA,UACI4C,IAAI,CAAC,MAAM,CACXC,EAAE,CAAC,OAAO,CACVV,SAAS,CAAC,iDAAiD,CAC3DD,KAAK,CAAEzB,IAAI,CAACyC,KAAM,CAClBF,QAAQ,MACX,CAAC,EACD,CAAC,cACNhD,IAAA,QAAKmC,SAAS,CAAC,EAAE,CAAAC,QAAA,CACZzB,QAAQ,cACLT,KAAA,QAAKiC,SAAS,CAAC,cAAc,CAAAC,QAAA,eACzBpC,IAAA,WAAQmC,SAAS,CAAC,kBAAkB,CAACE,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAM,CAAEC,MAAM,CAAE,KAAM,CAAE,CAACY,OAAO,CAAEzB,eAAgB,CAAAU,QAAA,CAAC,MAAI,CAAQ,CAAC,cACrHpC,IAAA,WAAQmC,SAAS,CAAC,kBAAkB,CAACE,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAM,CAAEC,MAAM,CAAE,KAAM,CAAE,CAACY,OAAO,CAAEtB,iBAAkB,CAAAO,QAAA,CAAC,QAAM,CAAQ,CAAC,EACxH,CAAC,cAENpC,IAAA,WAAQmC,SAAS,CAAC,yCAAyC,CAACE,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAM,CAAEC,MAAM,CAAE,KAAM,CAAE,CAACK,IAAI,CAAC,QAAQ,CAACO,OAAO,CAAEvB,eAAgB,CAAAQ,QAAA,CAAC,MAAI,CAAQ,CAC5J,CACA,CAAC,EACL,CAAC,CACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAAjC,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}